<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>منصة مدى التعليمية - إدارة الجداول الدراسية</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Google Fonts - Arabic Support -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="assets/css/style.css" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="bg-primary text-white py-4 mb-4">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1 class="mb-0">
                        <i class="bi bi-calendar-week me-3"></i>
                        منصة مدى التعليمية
                    </h1>
                    <p class="mb-0 mt-2">نظام إدارة الجداول الدراسية</p>
                    <p class="mb-0 mt-1">
                        <small>
                            إشراف: أ. ليث السلامين • أ. زكي العمر • أ. أحمد العزام • أ. علي المصري
                        </small>
                    </p>
                </div>
                <div class="col-md-4 text-end">
                    <button class="btn btn-outline-light" id="clearDataBtn">
                        <i class="bi bi-trash"></i> مسح البيانات
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Welcome Section -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="card shadow-sm">
                    <div class="card-body text-center">
                        <h2 class="card-title text-primary">
                            <i class="bi bi-star-fill me-2"></i>
                            مرحباً بك في منصة مدى التعليمية
                        </h2>
                        <p class="card-text lead">أضف حصصك الدراسية وشاهد جدولك الأسبوعي بطريقة تفاعلية ومنظمة</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Class Form -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="card shadow">
                    <div class="card-header bg-success text-white">
                        <h3 class="card-title mb-0">
                            <i class="bi bi-plus-circle me-2"></i>
                            إضافة حصة جديدة
                        </h3>
                    </div>
                    <div class="card-body">
                        <form id="classForm">
                            <div class="row g-3">
                                <!-- الصف الأول -->
                                <div class="col-md-3">
                                    <label for="daySelect" class="form-label">
                                        <i class="bi bi-calendar-day me-2"></i>اليوم
                                    </label>
                                    <select class="form-select" id="daySelect" required>
                                        <option value="">اختر اليوم</option>
                                        <option value="sunday">الأحد</option>
                                        <option value="monday">الاثنين</option>
                                        <option value="tuesday">الثلاثاء</option>
                                        <option value="wednesday">الأربعاء</option>
                                        <option value="thursday">الخميس</option>
                                        <option value="friday">الجمعة</option>
                                        <option value="saturday">السبت</option>
                                    </select>
                                </div>
                                
                                <div class="col-md-3">
                                    <label for="timeSelect" class="form-label">
                                        <i class="bi bi-clock me-2"></i>الوقت
                                    </label>
                                    <select class="form-select" id="timeSelect" required>
                                        <option value="">اختر الوقت</option>
                                        <option value="16:00">4:00 عصراً</option>
                                        <option value="17:00">5:00 عصراً</option>
                                        <option value="18:00">6:00 عصراً</option>
                                        <option value="19:00">7:00 مساءً</option>
                                        <option value="20:00">8:00 مساءً</option>
                                        <option value="21:00">9:00 مساءً</option>
                                        <option value="22:00">10:00 مساءً</option>
                                    </select>
                                </div>
                                
                                <div class="col-md-3">
                                    <label for="gradeSelect" class="form-label">
                                        <i class="bi bi-building me-2"></i>الصف
                                    </label>
                                    <select class="form-select" id="gradeSelect" required>
                                        <option value="">اختر الصف</option>
                                        <option value="grade10">الصف العاشر</option>
                                        <option value="grade11_science">الحادي عشر علمي</option>
                                        <option value="grade11_arts">الحادي عشر أدبي</option>
                                        <option value="grade12_science">الثاني عشر علمي</option>
                                        <option value="grade12_arts">الثاني عشر أدبي</option>
                                    </select>
                                </div>
                                
                                <div class="col-md-3">
                                    <label for="subjectSelect" class="form-label">
                                        <i class="bi bi-book me-2"></i>المادة
                                    </label>
                                    <select class="form-select" id="subjectSelect" required>
                                        <option value="">اختر المادة</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- الصف الثاني -->
                            <div class="row g-3 mt-3">
                                <div class="col-md-8">
                                    <label for="teacherInput" class="form-label">
                                        <i class="bi bi-person me-2"></i>اسم المدرس
                                    </label>
                                    <input type="text" class="form-control" id="teacherInput" 
                                           placeholder="أدخل اسم المدرس" required>
                                </div>
                                
                                <div class="col-md-4 d-flex align-items-end">
                                    <button type="submit" class="btn btn-success btn-lg w-100">
                                        <i class="bi bi-plus-circle me-2"></i>إضافة الحصة
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- لوحة تحكم الصفوف والمواد -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="card shadow">
                    <div class="card-header bg-success text-white">
                        <h3 class="card-title mb-0">
                            <i class="bi bi-gear-fill me-2"></i>
                            لوحة تحكم الصفوف والمواد
                        </h3>
                    </div>
                    <div class="card-body">
                        <!-- علامات التبويب -->
                        <ul class="nav nav-tabs mb-4" id="controlTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="grades-tab" data-bs-toggle="tab" 
                                        data-bs-target="#grades-pane" type="button" role="tab">
                                    <i class="bi bi-building me-2"></i>إدارة الصفوف
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="subjects-tab" data-bs-toggle="tab" 
                                        data-bs-target="#subjects-pane" type="button" role="tab">
                                    <i class="bi bi-book me-2"></i>إدارة المواد
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="mapping-tab" data-bs-toggle="tab" 
                                        data-bs-target="#mapping-pane" type="button" role="tab">
                                    <i class="bi bi-link-45deg me-2"></i>ربط المواد بالصفوف
                                </button>
                            </li>
                        </ul>

                        <!-- محتوى علامات التبويب -->
                        <div class="tab-content" id="controlTabsContent">
                            <!-- إدارة الصفوف -->
                            <div class="tab-pane fade show active" id="grades-pane" role="tabpanel">
                                <div class="row mb-4">
                                    <div class="col-md-4">
                                        <label for="newGradeKey" class="form-label">رمز الصف</label>
                                        <input type="text" class="form-control" id="newGradeKey" 
                                               placeholder="مثل: grade13">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="newGradeName" class="form-label">اسم الصف</label>
                                        <input type="text" class="form-control" id="newGradeName" 
                                               placeholder="مثل: الثالث عشر علمي">
                                    </div>
                                    <div class="col-md-4 d-flex align-items-end">
                                        <button type="button" class="btn btn-primary w-100" id="addGradeBtn">
                                            <i class="bi bi-plus-circle me-2"></i>إضافة صف
                                        </button>
                                    </div>
                                </div>
                                <div id="gradesList" class="d-flex flex-wrap gap-2">
                                    <!-- سيتم ملؤها بواسطة JavaScript -->
                                </div>
                            </div>

                            <!-- إدارة المواد -->
                            <div class="tab-pane fade" id="subjects-pane" role="tabpanel">
                                <div class="row mb-4">
                                    <div class="col-md-4">
                                        <label for="newSubjectKey" class="form-label">رمز المادة</label>
                                        <input type="text" class="form-control" id="newSubjectKey" 
                                               placeholder="مثل: psychology">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="newSubjectName" class="form-label">اسم المادة</label>
                                        <input type="text" class="form-control" id="newSubjectName" 
                                               placeholder="مثل: علم النفس">
                                    </div>
                                    <div class="col-md-4 d-flex align-items-end">
                                        <button type="button" class="btn btn-primary w-100" id="addSubjectBtn">
                                            <i class="bi bi-plus-circle me-2"></i>إضافة مادة
                                        </button>
                                    </div>
                                </div>
                                <div id="subjectsList" class="d-flex flex-wrap gap-2">
                                    <!-- سيتم ملؤها بواسطة JavaScript -->
                                </div>
                            </div>

                            <!-- ربط المواد بالصفوف -->
                            <div class="tab-pane fade" id="mapping-pane" role="tabpanel">
                                <div class="row mb-4">
                                    <div class="col-md-4">
                                        <label for="mappingGradeSelect" class="form-label">اختر الصف</label>
                                        <select class="form-select" id="mappingGradeSelect">
                                            <option value="">اختر الصف</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="mappingSubjectSelect" class="form-label">اختر المادة</label>
                                        <select class="form-select" id="mappingSubjectSelect">
                                            <option value="">اختر المادة</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4 d-flex align-items-end">
                                        <button type="button" class="btn btn-success w-100" id="addMappingBtn">
                                            <i class="bi bi-link me-2"></i>ربط المادة بالصف
                                        </button>
                                    </div>
                                </div>
                                <div id="mappingDisplay">
                                    <!-- سيتم ملؤها بواسطة JavaScript -->
                                </div>
                            </div>
                        </div>

                        <!-- تنبيه -->
                        <div class="alert alert-info mt-4">
                            <i class="bi bi-info-circle me-2"></i>
                            <strong>ملاحظة:</strong> يمكن لكل صف أن يكون له حصة واحدة فقط في نفس الوقت لمنع التعارض.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Schedule Table -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="card shadow">
                    <div class="card-header bg-info text-white">
                        <h3 class="card-title mb-0">
                            <i class="bi bi-table me-2"></i>
                            الجدول الأسبوعي
                        </h3>
                    </div>
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table table-hover mb-0" id="scheduleTable">
                                <thead class="table-dark">
                                    <tr>
                                        <th>الوقت</th>
                                        <th>الأحد</th>
                                        <th>الاثنين</th>
                                        <th>الثلاثاء</th>
                                        <th>الأربعاء</th>
                                        <th>الخميس</th>
                                        <th>الجمعة</th>
                                        <th>السبت</th>
                                    </tr>
                                </thead>
                                <tbody id="scheduleBody">
                                    <!-- سيتم ملء الجدول ديناميكياً -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="card shadow">
                    <div class="card-header bg-warning text-dark">
                        <h3 class="card-title mb-0">
                            <i class="bi bi-gear me-2"></i>
                            إعدادات سريعة
                        </h3>
                    </div>
                    <div class="card-body quick-actions">
                        <div class="row g-3">
                            <div class="col-md-3">
                                <button class="btn btn-outline-primary w-100" id="exportBtn">
                                    <i class="bi bi-download me-2"></i>
                                    تصدير البيانات
                                </button>
                            </div>
                            <div class="col-md-3">
                                <button class="btn btn-outline-success w-100" id="importBtn">
                                    <i class="bi bi-upload me-2"></i>
                                    استيراد البيانات
                                </button>
                                <input type="file" id="importFile" accept=".json" class="hidden-file-input" aria-label="استيراد ملف البيانات">
                            </div>
                            <div class="col-md-3">
                                <button class="btn btn-outline-info w-100" id="printBtn">
                                    <i class="bi bi-printer me-2"></i>
                                    طباعة الجدول
                                </button>
                            </div>
                            <div class="col-md-3">
                                <button class="btn btn-outline-warning w-100" id="shareBtn">
                                    <i class="bi bi-share me-2"></i>
                                    مشاركة الجدول
                                </button>
                            </div>
                        </div>
                        
                        <!-- إدارة ملفات البيانات -->
                        <hr class="my-4">
                        <div class="team-data-section">
                            <h5 class="text-center mb-3">
                                <i class="bi bi-database me-2 data-icon"></i>
                                إدارة بيانات الفريق
                            </h5>
                            <div class="row g-3">
                                <div class="col-md-4">
                                    <button class="btn btn-success w-100" id="saveToFileBtn">
                                        <i class="bi bi-file-earmark-arrow-down me-2"></i>
                                        حفظ في ملف للفريق
                                    </button>
                                </div>
                                <div class="col-md-4">
                                    <button class="btn btn-info w-100" id="loadFromFileBtn">
                                        <i class="bi bi-file-earmark-arrow-up me-2"></i>
                                        تحميل من ملف الفريق
                                    </button>
                                    <input type="file" id="teamFile" accept=".json" class="hidden-file-input" aria-label="تحميل ملف بيانات الفريق">
                                </div>
                                <div class="col-md-4">
                                    <button class="btn btn-warning w-100" id="createTemplateBtn">
                                        <i class="bi bi-file-earmark-plus me-2"></i>
                                        إنشاء قالب فارغ
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics -->
        <div class="row mb-5">
            <div class="col-md-4">
                <div class="card text-center bg-primary text-white">
                    <div class="card-body">
                        <i class="bi bi-book display-4 mb-3"></i>
                        <h4 id="totalClasses">0</h4>
                        <p class="mb-0">إجمالي الحصص</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card text-center bg-success text-white">
                    <div class="card-body">
                        <i class="bi bi-calendar-day display-4 mb-3"></i>
                        <h4 id="activeDays">0</h4>
                        <p class="mb-0">الأيام النشطة</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card text-center bg-info text-white">
                    <div class="card-body">
                        <i class="bi bi-clock display-4 mb-3"></i>
                        <h4 id="totalHours">0</h4>
                        <p class="mb-0">إجمالي الساعات</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h6 class="mb-2">منصة مدى التعليمية</h6>
                    <p class="mb-1">نظام إدارة الجدول الدراسي</p>
                    <small class="text-light">
                        نسعى لتقديم أفضل الخدمات التعليمية
                    </small>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-2">
                        <strong>الإشراف:</strong> ليث السلامين، زكي العمر، أحمد العزام، علي المصري
                    </p>
                    <p class="mb-1">
                        <strong>التطوير:</strong> أيمن البريك
                    </p>
                    <small class="text-light">
                        جميع الحقوق محفوظة © 2024
                    </small>
                </div>
            </div>
            <hr class="my-3">
            <div class="row">
                <div class="col-12 text-center">
                    <small class="text-light">
                        تم تطوير هذا النظام لخدمة التعليم وتنظيم الجداول الدراسية
                    </small>
                </div>
            </div>
        </div>
    </footer>

    <!-- Edit Modal -->
    <div class="modal fade" id="editModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">تعديل الحصة</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="إغلاق"></button>
                </div>
                <div class="modal-body">
                    <form id="editForm">
                        <div class="mb-3">
                            <label for="editSubject" class="form-label">المادة</label>
                            <input type="text" class="form-control" id="editSubject" required>
                        </div>
                        <div class="mb-3">
                            <label for="editTeacher" class="form-label">اسم المدرس</label>
                            <input type="text" class="form-control" id="editTeacher" required>
                        </div>
                        <div class="mb-3">
                            <label for="editDay" class="form-label">اليوم</label>
                            <select class="form-select" id="editDay" required>
                                <option value="sunday">الأحد</option>
                                <option value="monday">الاثنين</option>
                                <option value="tuesday">الثلاثاء</option>
                                <option value="wednesday">الأربعاء</option>
                                <option value="thursday">الخميس</option>
                                <option value="friday">الجمعة</option>
                                <option value="saturday">السبت</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="editTime" class="form-label">الوقت</label>
                            <select class="form-select" id="editTime" required>
                                <option value="16:00">4:00 عصراً</option>
                                <option value="17:00">5:00 عصراً</option>
                                <option value="18:00">6:00 عصراً</option>
                                <option value="19:00">7:00 مساءً</option>
                                <option value="20:00">8:00 مساءً</option>
                                <option value="21:00">9:00 مساءً</option>
                                <option value="22:00">10:00 مساءً</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إلغاء</button>
                    <button type="button" class="btn btn-primary" id="saveEditBtn">حفظ التغييرات</button>
                </div>
            </div>
        </div>
    </div>

    <!-- إرشادات استخدام إدارة بيانات الفريق -->
    <div class="container mb-4">
        <div class="card border-info">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0">
                    <i class="bi bi-info-circle me-2"></i>
                    كيفية استخدام إدارة بيانات الفريق
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <h6 class="text-success">
                            <i class="bi bi-file-earmark-arrow-down me-2"></i>
                            حفظ في ملف للفريق
                        </h6>
                        <p class="small text-muted">
                            يحفظ جدولك الحالي في ملف JSON يمكن مشاركته مع أعضاء الفريق
                        </p>
                    </div>
                    <div class="col-md-4">
                        <h6 class="text-info">
                            <i class="bi bi-file-earmark-arrow-up me-2"></i>
                            تحميل من ملف الفريق
                        </h6>
                        <p class="small text-muted">
                            يحمّل ملف JSON محفوظ مسبقاً لعرض جدول أحد أعضاء الفريق
                        </p>
                    </div>
                    <div class="col-md-4">
                        <h6 class="text-warning">
                            <i class="bi bi-file-earmark-plus me-2"></i>
                            إنشاء قالب فارغ
                        </h6>
                        <p class="small text-muted">
                            ينشئ ملف قالب فارغ يمكن استخدامه لبدء جدول جديد
                        </p>
                    </div>
                </div>
                <hr>
                <div class="alert alert-warning mb-0">
                    <i class="bi bi-exclamation-triangle me-2"></i>
                    <strong>تنبيه:</strong> عند تحميل ملف جديد، سيتم استبدال الجدول الحالي. تأكد من حفظ عملك أولاً!
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>منصة مدى التعليمية</h5>
                    <p class="mb-1">نظام إدارة الجداول الدراسية التفاعلي</p>
                    <p class="mb-0">
                        <small>إشراف: أ. ليث السلامين • أ. زكي العمر • أ. أحمد العزام • أ. علي المصري</small>
                    </p>
                </div>
                <div class="col-md-6 text-md-end">
                    <h6>التصميم والتطوير</h6>
                    <p class="mb-1">
                        <i class="bi bi-code-slash me-2"></i>
                        <strong>أيمن البريك</strong>
                    </p>
                    <p class="mb-0">
                        <small class="text-muted">
                            جميع الحقوق محفوظة © 2024
                        </small>
                    </p>
                </div>
            </div>
            <hr class="my-3">
            <div class="row">
                <div class="col-12 text-center">
                    <small class="text-muted">
                        تم تطوير هذا النظام لخدمة التعليم وتنظيم الجداول الدراسية
                    </small>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="assets/js/script.js"></script>
</body>
</html>